# CardsHub - Cloudflare Workers Configuration (OpenNext)
name = "cardshub"
main = ".open-next/worker.js"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# Static assets
[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "cardshub-db"
database_id = "b81d49dc-a3e8-4be2-9fbe-835e4046deaf"

# R2 Bucket binding
[[r2_buckets]]
binding = "R2"
bucket_name = "cardshub-uploads"

# Environment variables (set via dashboard or wrangler secret)
# DISCORD_CLIENT_ID
# DISCORD_CLIENT_SECRET

[vars]
NEXT_PUBLIC_APP_URL = "https://hub.axailotl.ai"

# Development overrides
[env.development.vars]
NEXT_PUBLIC_APP_URL = "http://localhost:3000"

# Preview environment
[env.preview]
[[env.preview.d1_databases]]
binding = "DB"
database_name = "cardshub-db"
database_id = "b81d49dc-a3e8-4be2-9fbe-835e4046deaf"

[[env.preview.r2_buckets]]
binding = "R2"
bucket_name = "cardshub-uploads-preview"
